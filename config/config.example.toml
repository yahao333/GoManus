# =============================================================================
# GoManus 配置文件示例
# =============================================================================
# 复制此文件为 config.toml 并根据你的需求进行配置
# 注意：config.toml 包含敏感信息，已被 .gitignore 忽略

# =============================================================================
# LLM 配置
# =============================================================================

# 默认 LLM 配置
[llm.default]
model = "gpt-4o"                                    # 模型名称
base_url = "https://api.openai.com/v1"               # API 基础 URL
api_key = "sk-your-api-key-here"                     # API 密钥（必填）
max_tokens = 4096                                     # 最大令牌数
temperature = 0.7                                     # 温度参数 (0.0-2.0)
api_type = "openai"                                   # API 类型: openai, azure, ollama
api_version = ""                                      # API 版本（Azure 需要）
max_input_tokens = null                               # 最大输入令牌数（可选）

# 视觉模型配置（用于图像处理任务）
[llm.vision]
model = "gpt-4o"                                    # 视觉模型
base_url = "https://api.openai.com/v1"               # 视觉 API URL
api_key = "sk-your-api-key-here"                     # 视觉 API 密钥
max_tokens = 4096                                     # 最大令牌数
temperature = 0.0                                     # 温度参数
api_type = "openai"                                   # API 类型
api_version = ""                                      # API 版本

# 其他 LLM 配置示例
[llm.local]
model = "llama2"                                    # 本地模型
base_url = "http://localhost:11434/v1"                # Ollama 本地地址
api_key = "ollama"                                   # Ollama 固定密钥
max_tokens = 2048                                     # 本地模型令牌数
temperature = 0.8                                     # 温度参数
api_type = "ollama"                                   # API 类型
api_version = ""                                      # API 版本

# Azure OpenAI 配置示例
[llm.azure]
model = "gpt-4"                                      # Azure 模型部署名
base_url = "https://your-resource.openai.azure.com/"  # Azure 资源 URL
api_key = "your-azure-api-key"                       # Azure API 密钥
max_tokens = 4096                                     # 最大令牌数
temperature = 0.7                                     # 温度参数
api_type = "azure"                                    # API 类型
api_version = "2023-12-01-preview"                    # Azure API 版本

# =============================================================================
# 浏览器配置
# =============================================================================

[browser]
headless = false                                      # 无头模式 (false: 显示浏览器, true: 后台运行)
disable_security = true                               # 禁用安全限制
extra_chromium_args = []                             # 额外的 Chromium 启动参数
chrome_instance_path = ""                            # 自定义 Chrome 路径
wss_url = ""                                          # WebSocket 服务器 URL
cdp_url = ""                                          # Chrome DevTools Protocol URL
max_content_length = 2000                            # 最大内容长度（字符）

# 浏览器代理配置（可选）
[browser.proxy]
server = ""                                           # 代理服务器地址 (例: http://proxy.example.com:8080)
username = ""                                         # 代理用户名
password = ""                                         # 代理密码

# =============================================================================
# 搜索配置
# =============================================================================

[search]
engine = "Google"                                     # 默认搜索引擎
fallback_engines = ["DuckDuckGo", "Baidu", "Bing"]   # 备用搜索引擎列表
retry_delay = 60                                      # 重试延迟（秒）
max_retries = 3                                        # 最大重试次数
lang = "en"                                            # 搜索语言
country = "us"                                        # 搜索国家/地区

# 搜索引擎特定配置示例
[search.engines]
[search.engines.google]
api_key = ""                                          # Google Custom Search API 密钥
cx = ""                                               # 搜索引擎 ID

[search.engines.bing]
api_key = ""                                          # Bing Search API 密钥

# =============================================================================
# 沙盒配置
# =============================================================================

[sandbox]
use_sandbox = false                                   # 是否启用沙盒 (true: 启用 Docker 沙盒)
image = "python:3.12-slim"                           # Docker 镜像
work_dir = "/workspace"                               # 工作目录
memory_limit = "512m"                                 # 内存限制
cpu_limit = 1.0                                       # CPU 限制（核心数）
timeout = 300                                         # 超时时间（秒）
network_enabled = false                               # 是否启用网络访问

# 沙盒挂载配置
[sandbox.mounts]
source = ""                                           # 源目录
target = ""                                           # 目标目录
read_only = false                                     # 是否只读

# =============================================================================
# Daytona 配置（可选，用于远程开发环境）
# =============================================================================

[daytona]
enabled = false                                       # 是否启用 Daytona
daytona_api_key = ""                                  # Daytona API 密钥
daytona_server_url = "https://app.daytona.io/api"    # Daytona 服务器 URL
daytona_target = "us"                                 # 目标区域
sandbox_image_name = "whitezxj/sandbox:0.1.0"          # 沙盒镜像名称
sandbox_entrypoint = "/usr/bin/supervisord -n -c /etc/supervisor/conf.d/supervisord.conf"  # 容器入口点
vnc_password = "123456"                               # VNC 密码

# =============================================================================
# 工作流配置
# =============================================================================

[runflow]
use_data_analysis_agent = false                        # 是否启用数据分析智能体
max_steps = 10                                        # 最大执行步骤数
timeout = 600                                          # 工作流超时时间（秒）
retry_on_failure = true                                # 失败时是否重试

# 工作流步骤配置
[runflow.steps]
planning = true                                       # 是否启用规划步骤
execution = true                                      # 是否启用执行步骤
validation = true                                     # 是否启用验证步骤
cleanup = true                                         # 是否启用清理步骤

# =============================================================================
# MCP (Model Context Protocol) 配置
# =============================================================================

[mcp]
server_reference = "app.mcp.server"                   # 服务器引用

# MCP 服务器配置示例
[mcp.servers]
[mcp.servers.file_server]
type = "stdio"                                         # 服务器类型: stdio, http
url = ""                                               # 服务器 URL（http 类型）
command = "mcp-server-file"                           # 命令（stdio 类型）
args = ["--port", "3000"]                            # 命令参数

[mcp.servers.web_server]
type = "http"                                         # HTTP 服务器
url = "http://localhost:8080/mcp"                     # 服务器 URL
command = ""                                           # 命令（http 类型时为空）
args = []                                              # 参数（http 类型时为空）

# =============================================================================
# 日志配置
# =============================================================================

[logging]
level = "info"                                        # 日志级别: debug, info, warn, error
file = "logs/gomanus.log"                             # 日志文件路径
max_size = 100                                         # 最大文件大小（MB）
max_backups = 3                                        # 备份文件数量
max_age = 30                                          # 最大保存天数
compress = true                                       # 是否压缩旧日志

# 控制台日志配置
[logging.console]
enabled = true                                        # 是否启用控制台日志
color = true                                          # 是否启用彩色输出
format = "json"                                       # 输出格式: text, json

# =============================================================================
# 性能配置
# =============================================================================

[performance]
max_concurrent_requests = 5                           # 最大并发请求数
request_timeout = 120                                  # 请求超时时间（秒）
cache_enabled = true                                  # 是否启用缓存
cache_ttl = 3600                                      # 缓存过期时间（秒）
memory_limit = "1GB"                                  # 内存使用限制

# 连接池配置
[performance.connection_pool]
max_connections = 10                                  # 最大连接数
max_idle_connections = 5                               # 最大空闲连接数
connection_timeout = 30                               # 连接超时时间（秒）
idle_timeout = 300                                    # 空闲超时时间（秒）

# =============================================================================
# 安全配置
# =============================================================================

[security]
enable_api_key_validation = true                      # 是否启用 API 密钥验证
allowed_hosts = ["*"]                                 # 允许的主机列表
cors_enabled = true                                   # 是否启用 CORS
cors_origins = ["*"]                                   # CORS 允许的源
rate_limit_enabled = false                             # 是否启用速率限制
rate_limit_requests = 100                             # 速率限制请求数
rate_limit_window = 3600                               # 速率限制时间窗口（秒）

# =============================================================================
# 开发配置
# =============================================================================

[development]
debug_mode = false                                    # 调试模式
profiling_enabled = false                              # 是否启用性能分析
mock_llm = false                                      # 是否使用模拟 LLM
hot_reload = true                                      # 是否启用热重载
dev_workspace = "./dev_workspace"                      # 开发工作目录

# =============================================================================
# 示例配置（可删除）
# =============================================================================

# 环境特定配置示例
[environments.development]
log_level = "debug"
cache_enabled = false

[environments.production]
log_level = "warn"
cache_enabled = true
use_sandbox = true

# 特定智能体配置示例
[agents.data_analyst]
llm_config = "default"
tools = ["PythonExecute", "SimpleSearch"]
system_prompt = "你是一个专业的数据分析师"

[agents.web_developer]
llm_config = "default"
tools = ["BrowserUseTool", "StrReplaceEditor", "AskHuman"]
system_prompt = "你是一个专业的网页开发者"

# =============================================================================
# 配置说明
# =============================================================================

# 1. API 密钥安全:
#    - 不要在代码中硬编码 API 密钥
#    - 使用环境变量或安全的密钥管理系统
#    - 定期轮换 API 密钥
#
# 2. 模型选择:
#    - OpenAI: gpt-4o, gpt-4, gpt-3.5-turbo
#    - Azure: 部署的模型名称
#    - Ollama: 本地部署的模型名称
#
# 3. 沙盒安全:
#    - 生产环境建议启用沙盒
#    - 限制沙盒的网络访问
#    - 设置合理的资源限制
#
# 4. 性能优化:
#    - 根据硬件配置调整并发数
#    - 启用缓存减少 API 调用
#    - 监控内存使用情况
#
# 5. 环境变量支持:
#    - 支持使用 GOMANUS_ 前缀的环境变量覆盖配置
#    - 例: GOMANUS_LLM_DEFAULT_API_KEY=your_key
